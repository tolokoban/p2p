"use strict";(self.webpackChunk_tolokoban_p2p_doc=self.webpackChunk_tolokoban_p2p_doc||[]).push([["613"],{936(e,t,s){s.d(t,{Nx:()=>c,V6:()=>u});var n=s(425);class i{constructor(){this.listeners=new Set}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}dispatch(e){for(let t of this.listeners)t(e)}}class r{constructor(e){this.buffer=e,this.offset=0,this.view=new DataView(e),this.byteLength=e.byteLength}getString(){let e=this.view.getUint32(this.offset);this.offset+=4;let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=t.byteLength,new TextDecoder().decode(t)}getArrayBuffer(){let e=this.view.getUint32(this.offset);this.offset+=4;let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=t.byteLength,t}getUint8(){let e=this.view.getUint8(this.offset);return this.offset+=1,e}getInt8(){let e=this.view.getInt8(this.offset);return this.offset+=1,e}getUint16(){let e=this.view.getUint16(this.offset);return this.offset+=2,e}getInt16(){let e=this.view.getInt16(this.offset);return this.offset+=2,e}getUint32(){let e=this.view.getUint32(this.offset);return this.offset+=4,e}getInt32(){let e=this.view.getInt32(this.offset);return this.offset+=4,e}getFloat32(){let e=this.view.getFloat32(this.offset);return this.offset+=4,e}getFloat64(){let e=this.view.getFloat64(this.offset);return this.offset+=8,e}}let o={Uint8:1,Uint16:2,Uint32:4,Int8:1,Int16:2,Int32:4,Float32:4,Float64:8};class l{constructor(e){this.signalServerURL=e,this.eventConnected=new i,this.eventMessage=new i,this.eventClose=new i,this.remoteChannel=null,this.messageToBeSent=[],this.handleMessage=e=>{let{data:t}=e;console.log("RECEIVED:",t);let s=new r(t);this.eventMessage.dispatch(s)},this.onMessage=e=>{if(console.log("\uD83D\uDC1E [peer@187] data =",e),e instanceof ArrayBuffer)this.eventMessage.dispatch(new r(e));else throw Error("Unexpected message type!")},this.peerConnection=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun.l.google.com:5349"},{urls:"stun:stun1.l.google.com:3478"},{urls:"stun:stun1.l.google.com:5349"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun2.l.google.com:5349"},{urls:"stun:stun3.l.google.com:3478"},{urls:"stun:stun3.l.google.com:5349"},{urls:"stun:stun4.l.google.com:19302"},{urls:"stun:stun4.l.google.com:5349"}]}),this.dataChannel=this.peerConnection.createDataChannel("p2p"),this.peerConnection.ondatachannel=e=>{let{channel:t}=e;this.remoteChannel=t,t.onmessage=this.handleMessage,t.onclose=()=>this.eventClose.dispatch(this)}}close(){var e;null==(e=this.remoteChannel)||e.close(),this.dataChannel.close()}clear(){return this.messageToBeSent.splice(0),this}putString(e){return this.messageToBeSent.push(e),this}putArrayBuffer(e){return this.messageToBeSent.push(e),this}putNumber(e,t){return this.messageToBeSent.push({type:e,value:t}),this}send(){var e;let{messageToBeSent:t}=this;if(0===t.length)return;let s=0,n=[];for(let e of t)if("string"==typeof e){s+=4;let t=new TextEncoder().encode(e);n.push(t),s+=t.byteLength}else if(e instanceof ArrayBuffer){s+=4;let t=new Uint8Array(e);n.push(t),s+=t.byteLength}else s+=o[e.type];let i=new Uint8Array(s),r=new DataView(i.buffer),l=0;for(let e of t)if("string"==typeof e||e instanceof ArrayBuffer){let e=n.shift();if(!e)throw Error("Missing chunk!");r.setUint32(l,e.byteLength),l+=4,i.set(e,l),l+=e.byteLength}else{switch(e.type){case"Float32":r.setFloat32(l,e.value);break;case"Float64":r.setFloat64(l,e.value);break;case"Int16":r.setInt16(l,e.value);break;case"Int32":r.setInt32(l,e.value);break;case"Int8":r.setInt8(l,e.value);break;case"Uint16":case"Uint32":case"Uint8":r.setUint16(l,e.value);break;default:throw Error(`Unknown type "${e.type}"!`)}l+=o[e.type]}null==(e=this.remoteChannel)||e.send(i)}sendString(e){this.clear().putString(e).send()}signal(e){var t,s,i,r;return t=this,s=void 0,i=void 0,r=function*(){var t,s;let i={s:e.service};t=e,(0,n.Xj)(t,{input:"string"})&&(i.i=e.input),s=e,(0,n.Xj)(s,{key:"string"})&&(i.k=e.key);let r=new Headers({"Content-Type":"application/json"}),o=yield fetch(this.signalServerURL,{method:"POST",headers:r,mode:"cors",cache:"no-cache",redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(i)});return yield o.json()},new(i||(i=Promise))(function(e,n){function o(e){try{a(r.next(e))}catch(e){n(e)}}function l(e){try{a(r.throw(e))}catch(e){n(e)}}function a(t){var s;t.done?e(t.value):((s=t.value)instanceof i?s:new i(function(e){e(s)})).then(o,l)}a((r=r.apply(t,s||[])).next())})}}var a=function(e,t,s,n){return new(s||(s=Promise))(function(i,r){function o(e){try{a(n.next(e))}catch(e){r(e)}}function l(e){try{a(n.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?i(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,l)}a((n=n.apply(e,t||[])).next())})};class c extends l{static connect(e,t){return a(this,void 0,void 0,function*(){let s=new c(e,t);return yield s.connect(),s})}constructor(e,t){super(e),this._id="",this._address="",this._id=t}get id(){return this._id}get address(){return this._address}connect(){return a(this,void 0,void 0,function*(){let e=yield this.readOffer(),t=yield this.createAnswer(e);yield this.signalAnswer(t)})}readOffer(){return a(this,void 0,void 0,function*(){let e=yield this.signal({service:"get-offer",key:this.id});(0,n.j)(e,{offer:"string"});let t=JSON.parse(e.offer);return(0,n.X9)(t,{type:["literal","offer"],sdp:"string"}),t})}signalAnswer(e){return a(this,void 0,void 0,function*(){let t=JSON.stringify(e),s=yield this.signal({service:"set-answer",input:t,key:this.id});(0,n.j)(s,{id:"string"})})}createAnswer(e){return a(this,void 0,void 0,function*(){return new Promise((t,s)=>{a(this,void 0,void 0,function*(){try{let{peerConnection:s,dataChannel:n}=this;s.setRemoteDescription(e),n.onopen=()=>{console.log("ANSWER: Connection established!"),this.eventConnected.dispatch(this)},n.onmessage=e=>this.onMessage(e.data);let i=yield s.createAnswer();yield s.setLocalDescription(i),s.onicecandidate=e=>{e.candidate||t(s.localDescription)}}catch(e){console.error("Unable to create an offer:",e),s(e)}})})})}}var h=function(e,t,s,n){return new(s||(s=Promise))(function(i,r){function o(e){try{a(n.next(e))}catch(e){r(e)}}function l(e){try{a(n.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?i(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,l)}a((n=n.apply(e,t||[])).next())})};class u extends l{static connect(e){return h(this,void 0,void 0,function*(){let t=new u(e);return yield t.connect(),t})}constructor(e){super(e),this._id="",this._address=""}get id(){return this._id}get address(){return this._address}connect(){return h(this,void 0,void 0,function*(){let e=yield this.createOffer();yield this.signalOffer(e),this.pollAnswer()})}pollAnswer(){globalThis.setTimeout(()=>h(this,void 0,void 0,function*(){try{let e=yield this.readAnswer();e?this.peerConnection.setRemoteDescription(e):this.pollAnswer()}catch(e){console.error("Error in PeerOffer.pollAnswer():",e)}}),1e3)}readAnswer(){return h(this,void 0,void 0,function*(){try{let e=yield this.signal({service:"get-answer",key:this.id});if((0,n.X9)(e,{answer:["|","string","null"]}),!e.answer)return null;let t=JSON.parse(e.answer);return(0,n.X9)(t,{type:["literal","answer"],sdp:"string"}),t}catch(e){throw console.error("Error in PeerOffer.readAnswer():",e),e}})}signalOffer(e){return h(this,void 0,void 0,function*(){let t=JSON.stringify(e),s=yield this.signal({service:"set-offer",input:t});(0,n.j)(s,{id:"string",address:"string"}),this._id=s.id,this._address=s.address})}createOffer(){return h(this,void 0,void 0,function*(){return new Promise((e,t)=>{h(this,void 0,void 0,function*(){try{let{peerConnection:s,dataChannel:n}=this;n.onopen=()=>{console.log("OFFER: Connection established!"),this.eventConnected.dispatch(this)},n.onmessage=e=>this.onMessage(e.data);let i=yield s.createOffer();yield s.setLocalDescription(i),s.onicecandidate=n=>{n.candidate||(s.localDescription?e(s.localDescription):t(Error("Unable to create Offer!")))}}catch(e){console.error("Unable to create an offer:",e),t(e)}})})})}}},424(e,t,s){s.d(t,{A:()=>l});var n=s(848),i=s(540),r=s(710);let o=r.Sxu.classNames;function l({className:e,peer:t}){let[s,l]=i.useState([]),[a,c]=i.useState(""),h=()=>{t.clear().putString(a).send(),l([{mine:!0,text:a},...s]),c("")};i.useEffect(()=>{let e=e=>{l([{mine:!1,text:e.getString()},...s])};return t.eventMessage.addListener(e),()=>t.eventMessage.removeListener(e)},[t,s]);let u=function(e){let[t,s]=i.useState(!1);return i.useEffect(()=>{let t=()=>{s(!0)};return e.eventClose.addListener(t),()=>e.eventClose.removeListener(t)},[e]),t}(t);return(0,n.jsxs)(r.UkC,{className:o.join(e,"src-components-Chat-Chat-module_chat_Lazgxc"),orientation:"column",template:"-1",children:[u?(0,n.jsx)(r.sWC,{margin:"S",color:"error",children:"Connection has been closed!"}):(0,n.jsxs)("div",{className:"src-components-Chat-Chat-module_prompt_K_vVPn",children:[(0,n.jsx)(r.Hqg,{value:a,onChange:c,autofocus:!0,onEnterKeyPressed:h}),(0,n.jsx)(r.qxP,{size:"S",icon:r.jQL,enabled:a.trim().length>0,onClick:h})]}),(0,n.jsx)("div",{className:"src-components-Chat-Chat-module_messages_o8KNTm",children:s.map((e,t)=>(0,n.jsx)("div",{className:e.mine?"src-components-Chat-Chat-module_mine_XEjMuE":"src-components-Chat-Chat-module_theirs_QqRVmz",children:(0,n.jsx)("div",{children:e.text})},t))})]})}},592(e,t,s){s.d(t,{U:()=>r});var n=s(54),i=s(425);let r={signalServer:new n.A("http://localhost:55555",{storage:{id:"signalServer",guard:i.Kg}})}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyLzYxMy44NDVhMmMzMjMyMGM1N2VkLmpzIiwic291cmNlcyI6WyIvaG9tZS90b2xva29iYW4vQ29kZS9naXRodWIvQHRvbG9rb2Jhbi9wMnAvZGlzdC9ldmVudC5qcyIsIi9ob21lL3RvbG9rb2Jhbi9Db2RlL2dpdGh1Yi9AdG9sb2tvYmFuL3AycC9kaXN0L21lc3NhZ2UuanMiLCIvaG9tZS90b2xva29iYW4vQ29kZS9naXRodWIvQHRvbG9rb2Jhbi9wMnAvZGlzdC9wZWVyLmpzIiwiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL0B0b2xva29iYW4vcDJwL2Rpc3QvYW5zd2VyLmpzIiwiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL0B0b2xva29iYW4vcDJwL2Rpc3Qvb2ZmZXIuanMiLCJ3ZWJwYWNrOi8vQHRvbG9rb2Jhbi9wMnAuZG9jLy4vc3JjL2NvbXBvbmVudHMvQ2hhdC9DaGF0Lm1vZHVsZS5jc3M/OWU5ZCIsIi9ob21lL3RvbG9rb2Jhbi9Db2RlL2dpdGh1Yi9AdG9sb2tvYmFuL3AycC9kb2N1bWVudGF0aW9uL3NyYy9jb21wb25lbnRzL0NoYXQvQ2hhdC50c3giLCIvaG9tZS90b2xva29iYW4vQ29kZS9naXRodWIvQHRvbG9rb2Jhbi9wMnAvZG9jdW1lbnRhdGlvbi9zcmMvc3RhdGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEdlbmVyaWNFdmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gbmV3IFNldCgpO1xuICAgIH1cbiAgICBhZGRMaXN0ZW5lcihsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5hZGQobGlzdGVuZXIpO1xuICAgIH1cbiAgICByZW1vdmVMaXN0ZW5lcihsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuICAgIH1cbiAgICBkaXNwYXRjaCh2YWx1ZSkge1xuICAgICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMubGlzdGVuZXJzKVxuICAgICAgICAgICAgbGlzdGVuZXIodmFsdWUpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50LmpzLm1hcCIsImV4cG9ydCBjbGFzcyBNZXNzYWdlIHtcbiAgICBjb25zdHJ1Y3RvcihidWZmZXIpIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBidWZmZXI7XG4gICAgICAgIHRoaXMub2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy52aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG4gICAgICAgIHRoaXMuYnl0ZUxlbmd0aCA9IGJ1ZmZlci5ieXRlTGVuZ3RoO1xuICAgIH1cbiAgICBnZXRTdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IGJ5dGVMZW5ndGggPSB0aGlzLnZpZXcuZ2V0VWludDMyKHRoaXMub2Zmc2V0KTtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gNDtcbiAgICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLmJ1ZmZlci5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5vZmZzZXQgKyBieXRlTGVuZ3RoKTtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gY2h1bmsuYnl0ZUxlbmd0aDtcbiAgICAgICAgcmV0dXJuIG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShjaHVuayk7XG4gICAgfVxuICAgIGdldEFycmF5QnVmZmVyKCkge1xuICAgICAgICBjb25zdCBieXRlTGVuZ3RoID0gdGhpcy52aWV3LmdldFVpbnQzMih0aGlzLm9mZnNldCk7XG4gICAgICAgIHRoaXMub2Zmc2V0ICs9IDQ7XG4gICAgICAgIGNvbnN0IGNodW5rID0gdGhpcy5idWZmZXIuc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMub2Zmc2V0ICsgYnl0ZUxlbmd0aCk7XG4gICAgICAgIHRoaXMub2Zmc2V0ICs9IGNodW5rLmJ5dGVMZW5ndGg7XG4gICAgICAgIHJldHVybiBjaHVuaztcbiAgICB9XG4gICAgZ2V0VWludDgoKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy52aWV3LmdldFVpbnQ4KHRoaXMub2Zmc2V0KTtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gMTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBnZXRJbnQ4KCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudmlldy5nZXRJbnQ4KHRoaXMub2Zmc2V0KTtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gMTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBnZXRVaW50MTYoKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy52aWV3LmdldFVpbnQxNih0aGlzLm9mZnNldCk7XG4gICAgICAgIHRoaXMub2Zmc2V0ICs9IDI7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0SW50MTYoKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy52aWV3LmdldEludDE2KHRoaXMub2Zmc2V0KTtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gMjtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBnZXRVaW50MzIoKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy52aWV3LmdldFVpbnQzMih0aGlzLm9mZnNldCk7XG4gICAgICAgIHRoaXMub2Zmc2V0ICs9IDQ7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0SW50MzIoKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy52aWV3LmdldEludDMyKHRoaXMub2Zmc2V0KTtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gNDtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBnZXRGbG9hdDMyKCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudmlldy5nZXRGbG9hdDMyKHRoaXMub2Zmc2V0KTtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gNDtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBnZXRGbG9hdDY0KCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudmlldy5nZXRGbG9hdDY0KHRoaXMub2Zmc2V0KTtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gODtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lc3NhZ2UuanMubWFwIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBpc1R5cGUgfSBmcm9tIFwiQHRvbG9rb2Jhbi90eXBlLWd1YXJkc1wiO1xuaW1wb3J0IHsgR2VuZXJpY0V2ZW50IH0gZnJvbSBcIi4vZXZlbnQuanNcIjtcbmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tIFwiLi9tZXNzYWdlLmpzXCI7XG5jb25zdCBTSVpFUyA9IHtcbiAgICBVaW50ODogMSxcbiAgICBVaW50MTY6IDIsXG4gICAgVWludDMyOiA0LFxuICAgIEludDg6IDEsXG4gICAgSW50MTY6IDIsXG4gICAgSW50MzI6IDQsXG4gICAgRmxvYXQzMjogNCxcbiAgICBGbG9hdDY0OiA4LFxufTtcbmV4cG9ydCBjbGFzcyBQZWVyIHtcbiAgICBjb25zdHJ1Y3RvcihzaWduYWxTZXJ2ZXJVUkwpIHtcbiAgICAgICAgdGhpcy5zaWduYWxTZXJ2ZXJVUkwgPSBzaWduYWxTZXJ2ZXJVUkw7XG4gICAgICAgIHRoaXMuZXZlbnRDb25uZWN0ZWQgPSBuZXcgR2VuZXJpY0V2ZW50KCk7XG4gICAgICAgIHRoaXMuZXZlbnRNZXNzYWdlID0gbmV3IEdlbmVyaWNFdmVudCgpO1xuICAgICAgICB0aGlzLmV2ZW50Q2xvc2UgPSBuZXcgR2VuZXJpY0V2ZW50KCk7XG4gICAgICAgIHRoaXMucmVtb3RlQ2hhbm5lbCA9IG51bGw7XG4gICAgICAgIHRoaXMubWVzc2FnZVRvQmVTZW50ID0gW107XG4gICAgICAgIHRoaXMuaGFuZGxlTWVzc2FnZSA9IChldnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gZXZ0O1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJSRUNFSVZFRDpcIiwgZGF0YSk7IC8vIEBGSVhNRTogUmVtb3ZlIHRoaXMgbGluZSB3cml0dGVuIG9uIDIwMjYtMDEtMDkgYXQgMTE6MDJcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBuZXcgTWVzc2FnZShkYXRhKTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRNZXNzYWdlLmRpc3BhdGNoKG1lc3NhZ2UpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uTWVzc2FnZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIvCfkJ4gW3BlZXJAMTg3XSBkYXRhID1cIiwgZGF0YSk7IC8vIEBGSVhNRTogUmVtb3ZlIHRoaXMgbGluZSB3cml0dGVuIG9uIDIwMjYtMDEtMDkgYXQgMTI6MDdcbiAgICAgICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50TWVzc2FnZS5kaXNwYXRjaChuZXcgTWVzc2FnZShkYXRhKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIG1lc3NhZ2UgdHlwZSFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24gPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24oe1xuICAgICAgICAgICAgaWNlU2VydmVyczogW1xuICAgICAgICAgICAgICAgIHsgdXJsczogXCJzdHVuOnN0dW4ubC5nb29nbGUuY29tOjE5MzAyXCIgfSxcbiAgICAgICAgICAgICAgICB7IHVybHM6IFwic3R1bjpzdHVuLmwuZ29vZ2xlLmNvbTo1MzQ5XCIgfSxcbiAgICAgICAgICAgICAgICB7IHVybHM6IFwic3R1bjpzdHVuMS5sLmdvb2dsZS5jb206MzQ3OFwiIH0sXG4gICAgICAgICAgICAgICAgeyB1cmxzOiBcInN0dW46c3R1bjEubC5nb29nbGUuY29tOjUzNDlcIiB9LFxuICAgICAgICAgICAgICAgIHsgdXJsczogXCJzdHVuOnN0dW4yLmwuZ29vZ2xlLmNvbToxOTMwMlwiIH0sXG4gICAgICAgICAgICAgICAgeyB1cmxzOiBcInN0dW46c3R1bjIubC5nb29nbGUuY29tOjUzNDlcIiB9LFxuICAgICAgICAgICAgICAgIHsgdXJsczogXCJzdHVuOnN0dW4zLmwuZ29vZ2xlLmNvbTozNDc4XCIgfSxcbiAgICAgICAgICAgICAgICB7IHVybHM6IFwic3R1bjpzdHVuMy5sLmdvb2dsZS5jb206NTM0OVwiIH0sXG4gICAgICAgICAgICAgICAgeyB1cmxzOiBcInN0dW46c3R1bjQubC5nb29nbGUuY29tOjE5MzAyXCIgfSxcbiAgICAgICAgICAgICAgICB7IHVybHM6IFwic3R1bjpzdHVuNC5sLmdvb2dsZS5jb206NTM0OVwiIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbCA9IHRoaXMucGVlckNvbm5lY3Rpb24uY3JlYXRlRGF0YUNoYW5uZWwoXCJwMnBcIik7XG4gICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24ub25kYXRhY2hhbm5lbCA9IChldnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgY2hhbm5lbCB9ID0gZXZ0O1xuICAgICAgICAgICAgdGhpcy5yZW1vdGVDaGFubmVsID0gY2hhbm5lbDtcbiAgICAgICAgICAgIGNoYW5uZWwub25tZXNzYWdlID0gdGhpcy5oYW5kbGVNZXNzYWdlO1xuICAgICAgICAgICAgY2hhbm5lbC5vbmNsb3NlID0gKCkgPT4gdGhpcy5ldmVudENsb3NlLmRpc3BhdGNoKHRoaXMpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAoX2EgPSB0aGlzLnJlbW90ZUNoYW5uZWwpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jbG9zZSgpO1xuICAgICAgICB0aGlzLmRhdGFDaGFubmVsLmNsb3NlKCk7XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLm1lc3NhZ2VUb0JlU2VudC5zcGxpY2UoMCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBwdXRTdHJpbmcobWVzc2FnZSkge1xuICAgICAgICB0aGlzLm1lc3NhZ2VUb0JlU2VudC5wdXNoKG1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcHV0QXJyYXlCdWZmZXIoYXJyYXlCdWZmZXIpIHtcbiAgICAgICAgdGhpcy5tZXNzYWdlVG9CZVNlbnQucHVzaChhcnJheUJ1ZmZlcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBwdXROdW1iZXIodHlwZSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5tZXNzYWdlVG9CZVNlbnQucHVzaCh7IHR5cGUsIHZhbHVlIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc2VuZCgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCB7IG1lc3NhZ2VUb0JlU2VudCB9ID0gdGhpcztcbiAgICAgICAgaWYgKG1lc3NhZ2VUb0JlU2VudC5sZW5ndGggPT09IDApXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBieXRlTGVuZ3RoID0gMDtcbiAgICAgICAgY29uc3QgY2h1bmtzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBtZXNzYWdlVG9CZVNlbnQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIGJ5dGVMZW5ndGggKz0gNDtcbiAgICAgICAgICAgICAgICBjb25zdCBjaHVuayA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShpdGVtKTtcbiAgICAgICAgICAgICAgICBjaHVua3MucHVzaChjaHVuayk7XG4gICAgICAgICAgICAgICAgYnl0ZUxlbmd0aCArPSBjaHVuay5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXRlbSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgYnl0ZUxlbmd0aCArPSA0O1xuICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rID0gbmV3IFVpbnQ4QXJyYXkoaXRlbSk7XG4gICAgICAgICAgICAgICAgY2h1bmtzLnB1c2goY2h1bmspO1xuICAgICAgICAgICAgICAgIGJ5dGVMZW5ndGggKz0gY2h1bmsuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ5dGVMZW5ndGggKz0gU0laRVNbaXRlbS50eXBlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcnJheSA9IG5ldyBVaW50OEFycmF5KGJ5dGVMZW5ndGgpO1xuICAgICAgICBjb25zdCB2aWV3ID0gbmV3IERhdGFWaWV3KGFycmF5LmJ1ZmZlcik7XG4gICAgICAgIGxldCBieXRlT2Zmc2V0ID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIG1lc3NhZ2VUb0JlU2VudCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiIHx8IGl0ZW0gaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rID0gY2h1bmtzLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgaWYgKCFjaHVuaylcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBjaHVuayFcIik7XG4gICAgICAgICAgICAgICAgdmlldy5zZXRVaW50MzIoYnl0ZU9mZnNldCwgY2h1bmsuYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICAgICAgYnl0ZU9mZnNldCArPSA0O1xuICAgICAgICAgICAgICAgIGFycmF5LnNldChjaHVuaywgYnl0ZU9mZnNldCk7XG4gICAgICAgICAgICAgICAgYnl0ZU9mZnNldCArPSBjaHVuay5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChpdGVtLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkZsb2F0MzJcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0RmxvYXQzMihieXRlT2Zmc2V0LCBpdGVtLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiRmxvYXQ2NFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zZXRGbG9hdDY0KGJ5dGVPZmZzZXQsIGl0ZW0udmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJJbnQxNlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zZXRJbnQxNihieXRlT2Zmc2V0LCBpdGVtLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiSW50MzJcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0SW50MzIoYnl0ZU9mZnNldCwgaXRlbS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkludDhcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0SW50OChieXRlT2Zmc2V0LCBpdGVtLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiVWludDE2XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnNldFVpbnQxNihieXRlT2Zmc2V0LCBpdGVtLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiVWludDMyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnNldFVpbnQxNihieXRlT2Zmc2V0LCBpdGVtLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiVWludDhcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0VWludDE2KGJ5dGVPZmZzZXQsIGl0ZW0udmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gdHlwZSBcIiR7aXRlbS50eXBlfVwiIWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBieXRlT2Zmc2V0ICs9IFNJWkVTW2l0ZW0udHlwZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgKF9hID0gdGhpcy5yZW1vdGVDaGFubmVsKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2VuZChhcnJheSk7XG4gICAgfVxuICAgIHNlbmRTdHJpbmcobWVzc2FnZSkge1xuICAgICAgICB0aGlzLmNsZWFyKCkucHV0U3RyaW5nKG1lc3NhZ2UpLnNlbmQoKTtcbiAgICB9XG4gICAgc2lnbmFsKGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgczogYXJncy5zZXJ2aWNlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChoYXNJbnB1dChhcmdzKSlcbiAgICAgICAgICAgICAgICBkYXRhLmkgPSBhcmdzLmlucHV0O1xuICAgICAgICAgICAgaWYgKGhhc0tleShhcmdzKSlcbiAgICAgICAgICAgICAgICBkYXRhLmsgPSBhcmdzLmtleTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3AgPSB5aWVsZCBmZXRjaCh0aGlzLnNpZ25hbFNlcnZlclVSTCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgICAgICBtb2RlOiBcImNvcnNcIixcbiAgICAgICAgICAgICAgICBjYWNoZTogXCJuby1jYWNoZVwiLFxuICAgICAgICAgICAgICAgIHJlZGlyZWN0OiBcImZvbGxvd1wiLFxuICAgICAgICAgICAgICAgIHJlZmVycmVyUG9saWN5OiBcIm5vLXJlZmVycmVyXCIsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwLmpzb24oKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gaGFzSW5wdXQoYXJncykge1xuICAgIHJldHVybiBpc1R5cGUoYXJncywgeyBpbnB1dDogXCJzdHJpbmdcIiB9KTtcbn1cbmZ1bmN0aW9uIGhhc0tleShhcmdzKSB7XG4gICAgcmV0dXJuIGlzVHlwZShhcmdzLCB7IGtleTogXCJzdHJpbmdcIiB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBlZXIuanMubWFwIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBhc3NlcnRUeXBlLCBhc3NlcnRUeXBlJCB9IGZyb20gXCJAdG9sb2tvYmFuL3R5cGUtZ3VhcmRzXCI7XG5pbXBvcnQgeyBQZWVyIH0gZnJvbSBcIi4vcGVlci5qc1wiO1xuZXhwb3J0IGNsYXNzIFBlZXJBbnN3ZXIgZXh0ZW5kcyBQZWVyIHtcbiAgICBzdGF0aWMgY29ubmVjdChzaWduYWxTZXJ2ZXJVUkwsIGlkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBwZWVyT2ZmZXIgPSBuZXcgUGVlckFuc3dlcihzaWduYWxTZXJ2ZXJVUkwsIGlkKTtcbiAgICAgICAgICAgIHlpZWxkIHBlZXJPZmZlci5jb25uZWN0KCk7XG4gICAgICAgICAgICByZXR1cm4gcGVlck9mZmVyO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3RydWN0b3Ioc2lnbmFsU2VydmVyVVJMLCBpZCkge1xuICAgICAgICBzdXBlcihzaWduYWxTZXJ2ZXJVUkwpO1xuICAgICAgICB0aGlzLl9pZCA9IFwiXCI7XG4gICAgICAgIHRoaXMuX2FkZHJlc3MgPSBcIlwiO1xuICAgICAgICB0aGlzLl9pZCA9IGlkO1xuICAgIH1cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZDtcbiAgICB9XG4gICAgZ2V0IGFkZHJlc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRyZXNzO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3Qgb2ZmZXIgPSB5aWVsZCB0aGlzLnJlYWRPZmZlcigpO1xuICAgICAgICAgICAgY29uc3QgYW5zd2VyID0geWllbGQgdGhpcy5jcmVhdGVBbnN3ZXIob2ZmZXIpO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5zaWduYWxBbnN3ZXIoYW5zd2VyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlYWRPZmZlcigpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCB0aGlzLnNpZ25hbCh7XG4gICAgICAgICAgICAgICAgc2VydmljZTogXCJnZXQtb2ZmZXJcIixcbiAgICAgICAgICAgICAgICBrZXk6IHRoaXMuaWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFzc2VydFR5cGUoZGF0YSwgeyBvZmZlcjogXCJzdHJpbmdcIiB9KTtcbiAgICAgICAgICAgIGNvbnN0IG9mZmVyID0gSlNPTi5wYXJzZShkYXRhLm9mZmVyKTtcbiAgICAgICAgICAgIGFzc2VydFR5cGUkKG9mZmVyLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogW1wibGl0ZXJhbFwiLCBcIm9mZmVyXCJdLFxuICAgICAgICAgICAgICAgIHNkcDogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG9mZmVyO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2lnbmFsQW5zd2VyKGFuc3dlcikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgYW5zd2VyQXNTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShhbnN3ZXIpO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNpZ25hbCh7XG4gICAgICAgICAgICAgICAgc2VydmljZTogXCJzZXQtYW5zd2VyXCIsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IGFuc3dlckFzU3RyaW5nLFxuICAgICAgICAgICAgICAgIGtleTogdGhpcy5pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXNzZXJ0VHlwZShyZXNwb25zZSwgeyBpZDogXCJzdHJpbmdcIiB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNyZWF0ZUFuc3dlcihvZmZlcikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhY3Rpb24gPSAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHBlZXJDb25uZWN0aW9uLCBkYXRhQ2hhbm5lbCB9ID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG9mZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLm9ub3BlbiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFOU1dFUjogQ29ubmVjdGlvbiBlc3RhYmxpc2hlZCFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudENvbm5lY3RlZC5kaXNwYXRjaCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbC5vbm1lc3NhZ2UgPSAoZSkgPT4gdGhpcy5vbk1lc3NhZ2UoZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFuc3dlciA9IHlpZWxkIHBlZXJDb25uZWN0aW9uLmNyZWF0ZUFuc3dlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihhbnN3ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24ub25pY2VjYW5kaWRhdGUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW50LmNhbmRpZGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHBlZXJDb25uZWN0aW9uLmxvY2FsRGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVW5hYmxlIHRvIGNyZWF0ZSBhbiBvZmZlcjpcIiwgZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFjdGlvbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuc3dlci5qcy5tYXAiLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IGFzc2VydFR5cGUsIGFzc2VydFR5cGUkIH0gZnJvbSBcIkB0b2xva29iYW4vdHlwZS1ndWFyZHNcIjtcbmltcG9ydCB7IFBlZXIgfSBmcm9tIFwiLi9wZWVyLmpzXCI7XG5leHBvcnQgY2xhc3MgUGVlck9mZmVyIGV4dGVuZHMgUGVlciB7XG4gICAgc3RhdGljIGNvbm5lY3Qoc2lnbmFsU2VydmVyVVJMKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBwZWVyT2ZmZXIgPSBuZXcgUGVlck9mZmVyKHNpZ25hbFNlcnZlclVSTCk7XG4gICAgICAgICAgICB5aWVsZCBwZWVyT2ZmZXIuY29ubmVjdCgpO1xuICAgICAgICAgICAgcmV0dXJuIHBlZXJPZmZlcjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHNpZ25hbFNlcnZlclVSTCkge1xuICAgICAgICBzdXBlcihzaWduYWxTZXJ2ZXJVUkwpO1xuICAgICAgICB0aGlzLl9pZCA9IFwiXCI7XG4gICAgICAgIHRoaXMuX2FkZHJlc3MgPSBcIlwiO1xuICAgIH1cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZDtcbiAgICB9XG4gICAgZ2V0IGFkZHJlc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRyZXNzO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3Qgb2ZmZXIgPSB5aWVsZCB0aGlzLmNyZWF0ZU9mZmVyKCk7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnNpZ25hbE9mZmVyKG9mZmVyKTtcbiAgICAgICAgICAgIHRoaXMucG9sbEFuc3dlcigpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9sbEFuc3dlcigpIHtcbiAgICAgICAgZ2xvYmFsVGhpcy5zZXRUaW1lb3V0KCgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYW5zd2VyID0geWllbGQgdGhpcy5yZWFkQW5zd2VyKCk7XG4gICAgICAgICAgICAgICAgaWYgKGFuc3dlcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKGFuc3dlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvbGxBbnN3ZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gUGVlck9mZmVyLnBvbGxBbnN3ZXIoKTpcIiwgZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgMTAwMCk7XG4gICAgfVxuICAgIHJlYWRBbnN3ZXIoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCB0aGlzLnNpZ25hbCh7XG4gICAgICAgICAgICAgICAgICAgIHNlcnZpY2U6IFwiZ2V0LWFuc3dlclwiLFxuICAgICAgICAgICAgICAgICAgICBrZXk6IHRoaXMuaWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYXNzZXJ0VHlwZSQoZGF0YSwge1xuICAgICAgICAgICAgICAgICAgICBhbnN3ZXI6IFtcInxcIiwgXCJzdHJpbmdcIiwgXCJudWxsXCJdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghZGF0YS5hbnN3ZXIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFuc3dlciA9IEpTT04ucGFyc2UoZGF0YS5hbnN3ZXIpO1xuICAgICAgICAgICAgICAgIGFzc2VydFR5cGUkKGFuc3dlciwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBbXCJsaXRlcmFsXCIsIFwiYW5zd2VyXCJdLFxuICAgICAgICAgICAgICAgICAgICBzZHA6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFuc3dlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBQZWVyT2ZmZXIucmVhZEFuc3dlcigpOlwiLCBleCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzaWduYWxPZmZlcihvZmZlcikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3Qgb2ZmZXJBc1N0cmluZyA9IEpTT04uc3RyaW5naWZ5KG9mZmVyKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zaWduYWwoe1xuICAgICAgICAgICAgICAgIHNlcnZpY2U6IFwic2V0LW9mZmVyXCIsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IG9mZmVyQXNTdHJpbmcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFzc2VydFR5cGUocmVzcG9uc2UsIHsgaWQ6IFwic3RyaW5nXCIsIGFkZHJlc3M6IFwic3RyaW5nXCIgfSk7XG4gICAgICAgICAgICB0aGlzLl9pZCA9IHJlc3BvbnNlLmlkO1xuICAgICAgICAgICAgdGhpcy5fYWRkcmVzcyA9IHJlc3BvbnNlLmFkZHJlc3M7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjcmVhdGVPZmZlcigpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aW9uID0gKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBwZWVyQ29ubmVjdGlvbiwgZGF0YUNoYW5uZWwgfSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbC5vbm9wZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJPRkZFUjogQ29ubmVjdGlvbiBlc3RhYmxpc2hlZCFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudENvbm5lY3RlZC5kaXNwYXRjaCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbC5vbm1lc3NhZ2UgPSAoZSkgPT4gdGhpcy5vbk1lc3NhZ2UoZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9mZmVyID0geWllbGQgcGVlckNvbm5lY3Rpb24uY3JlYXRlT2ZmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24ob2ZmZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24ub25pY2VjYW5kaWRhdGUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW50LmNhbmRpZGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVlckNvbm5lY3Rpb24ubG9jYWxEZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShwZWVyQ29ubmVjdGlvbi5sb2NhbERlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJVbmFibGUgdG8gY3JlYXRlIE9mZmVyIVwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlVuYWJsZSB0byBjcmVhdGUgYW4gb2ZmZXI6XCIsIGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhY3Rpb24oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vZmZlci5qcy5tYXAiLCIvLyBleHRyYWN0ZWQgYnkgY3NzLWV4dHJhY3QtcnNwYWNrLXBsdWdpblxuZXhwb3J0IGRlZmF1bHQge1wiY2hhdFwiOlwic3JjLWNvbXBvbmVudHMtQ2hhdC1DaGF0LW1vZHVsZV9jaGF0X0xhemd4Y1wiLFwibWVzc2FnZXNcIjpcInNyYy1jb21wb25lbnRzLUNoYXQtQ2hhdC1tb2R1bGVfbWVzc2FnZXNfbzhLTlRtXCIsXCJtaW5lXCI6XCJzcmMtY29tcG9uZW50cy1DaGF0LUNoYXQtbW9kdWxlX21pbmVfWEVqTXVFXCIsXCJ0aGVpcnNcIjpcInNyYy1jb21wb25lbnRzLUNoYXQtQ2hhdC1tb2R1bGVfdGhlaXJzX1FxUlZtelwiLFwicHJvbXB0XCI6XCJzcmMtY29tcG9uZW50cy1DaGF0LUNoYXQtbW9kdWxlX3Byb21wdF9LX3ZWUG5cIn07IiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtcbiAgSWNvbk1haWwsXG4gIFRoZW1lLFxuICBWaWV3RmxvYXRpbmdCdXR0b24sXG4gIFZpZXdJbnB1dFRleHQsXG4gIFZpZXdQYW5lbCxcbiAgVmlld1N0cmlwLFxufSBmcm9tIFwiQHRvbG9rb2Jhbi91aVwiO1xuaW1wb3J0IHsgUGVlciwgUGVlck1lc3NhZ2UgfSBmcm9tIFwiQHRvbG9rb2Jhbi9wMnBcIjtcblxuaW1wb3J0IFN0eWxlcyBmcm9tIFwiLi9DaGF0Lm1vZHVsZS5jc3NcIjtcblxuY29uc3QgJCA9IFRoZW1lLmNsYXNzTmFtZXM7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdFByb3BzIHtcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICBwZWVyOiBQZWVyO1xufVxuXG5pbnRlcmZhY2UgTWVzc2FnZSB7XG4gIG1pbmU6IGJvb2xlYW47XG4gIHRleHQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ2hhdCh7IGNsYXNzTmFtZSwgcGVlciB9OiBDaGF0UHJvcHMpIHtcbiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSBSZWFjdC51c2VTdGF0ZTxNZXNzYWdlW10+KFtdKTtcbiAgY29uc3QgW3RleHQsIHNldFRleHRdID0gUmVhY3QudXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IGhhbmRsZVNlbmQgPSAoKSA9PiB7XG4gICAgcGVlci5jbGVhcigpLnB1dFN0cmluZyh0ZXh0KS5zZW5kKCk7XG4gICAgc2V0TWVzc2FnZXMoW3sgbWluZTogdHJ1ZSwgdGV4dCB9LCAuLi5tZXNzYWdlc10pO1xuICAgIHNldFRleHQoXCJcIik7XG4gIH07XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgY2FsbGJhY2sgPSAobWVzc2FnZTogUGVlck1lc3NhZ2UpID0+IHtcbiAgICAgIGNvbnN0IHRleHQgPSBtZXNzYWdlLmdldFN0cmluZygpO1xuICAgICAgc2V0TWVzc2FnZXMoW3sgbWluZTogZmFsc2UsIHRleHQgfSwgLi4ubWVzc2FnZXNdKTtcbiAgICB9O1xuICAgIHBlZXIuZXZlbnRNZXNzYWdlLmFkZExpc3RlbmVyKGNhbGxiYWNrKTtcbiAgICByZXR1cm4gKCkgPT4gcGVlci5ldmVudE1lc3NhZ2UucmVtb3ZlTGlzdGVuZXIoY2FsbGJhY2spO1xuICB9LCBbcGVlciwgbWVzc2FnZXNdKTtcbiAgY29uc3QgY2xvc2VkID0gdXNlQ2xvc2VkKHBlZXIpO1xuXG4gIHJldHVybiAoXG4gICAgPFZpZXdTdHJpcFxuICAgICAgY2xhc3NOYW1lPXskLmpvaW4oY2xhc3NOYW1lLCBTdHlsZXMuY2hhdCl9XG4gICAgICBvcmllbnRhdGlvbj1cImNvbHVtblwiXG4gICAgICB0ZW1wbGF0ZT1cIi0xXCJcbiAgICA+XG4gICAgICB7Y2xvc2VkID8gKFxuICAgICAgICA8Vmlld1BhbmVsIG1hcmdpbj1cIlNcIiBjb2xvcj1cImVycm9yXCI+XG4gICAgICAgICAgQ29ubmVjdGlvbiBoYXMgYmVlbiBjbG9zZWQhXG4gICAgICAgIDwvVmlld1BhbmVsPlxuICAgICAgKSA6IChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e1N0eWxlcy5wcm9tcHR9PlxuICAgICAgICAgIDxWaWV3SW5wdXRUZXh0XG4gICAgICAgICAgICB2YWx1ZT17dGV4dH1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtzZXRUZXh0fVxuICAgICAgICAgICAgYXV0b2ZvY3VzXG4gICAgICAgICAgICBvbkVudGVyS2V5UHJlc3NlZD17aGFuZGxlU2VuZH1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxWaWV3RmxvYXRpbmdCdXR0b25cbiAgICAgICAgICAgIHNpemU9XCJTXCJcbiAgICAgICAgICAgIGljb249e0ljb25NYWlsfVxuICAgICAgICAgICAgZW5hYmxlZD17dGV4dC50cmltKCkubGVuZ3RoID4gMH1cbiAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVNlbmR9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgICAgPGRpdiBjbGFzc05hbWU9e1N0eWxlcy5tZXNzYWdlc30+XG4gICAgICAgIHttZXNzYWdlcy5tYXAoKGl0ZW0sIGluZGV4KSA9PiAoXG4gICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBjbGFzc05hbWU9e2l0ZW0ubWluZSA/IFN0eWxlcy5taW5lIDogU3R5bGVzLnRoZWlyc30+XG4gICAgICAgICAgICA8ZGl2PntpdGVtLnRleHR9PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkpfVxuICAgICAgPC9kaXY+XG4gICAgPC9WaWV3U3RyaXA+XG4gICk7XG59XG5cbmZ1bmN0aW9uIHVzZUNsb3NlZChwZWVyOiBQZWVyKSB7XG4gIGNvbnN0IFtjbG9zZWQsIHNldENsb3NlZF0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgY2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICBzZXRDbG9zZWQodHJ1ZSk7XG4gICAgfTtcbiAgICBwZWVyLmV2ZW50Q2xvc2UuYWRkTGlzdGVuZXIoY2FsbGJhY2spO1xuICAgIHJldHVybiAoKSA9PiBwZWVyLmV2ZW50Q2xvc2UucmVtb3ZlTGlzdGVuZXIoY2FsbGJhY2spO1xuICB9LCBbcGVlcl0pO1xuXG4gIHJldHVybiBjbG9zZWQ7XG59XG4iLCJpbXBvcnQgQXRvbWljU3RhdGUgZnJvbSBcIkB0b2xva29iYW4vcmVhY3Qtc3RhdGVcIjtcbmltcG9ydCB7IGlzU3RyaW5nIH0gZnJvbSBcIkB0b2xva29iYW4vdHlwZS1ndWFyZHNcIjtcblxuZXhwb3J0IGNvbnN0IFN0YXRlID0ge1xuICBzaWduYWxTZXJ2ZXI6IG5ldyBBdG9taWNTdGF0ZShcImh0dHA6Ly9sb2NhbGhvc3Q6NTU1NTVcIiwge1xuICAgIHN0b3JhZ2U6IHtcbiAgICAgIGlkOiBcInNpZ25hbFNlcnZlclwiLFxuICAgICAgZ3VhcmQ6IGlzU3RyaW5nLFxuICAgIH0sXG4gIH0pLFxufTtcbiJdLCJuYW1lcyI6WyJTZXQiLCJEYXRhVmlldyIsIlRleHREZWNvZGVyIiwiZSIsImNvbnNvbGUiLCJBcnJheUJ1ZmZlciIsIkVycm9yIiwiUlRDUGVlckNvbm5lY3Rpb24iLCJUZXh0RW5jb2RlciIsIlVpbnQ4QXJyYXkiLCJ0IiwiSGVhZGVycyIsImZldGNoIiwiSlNPTiIsIlByb21pc2UiLCJyIiwiZ2xvYmFsVGhpcyIsImgiLCJzIiwiaSJdLCJtYXBwaW5ncyI6IjRKQUFPLE9BQU0sRUFDVCxhQUFjLENBQ1YsSUFBSSxDQUFDLFNBQVMsQ0FBRyxJQUFJQSxHQUN6QixDQUNBLFlBQVksQ0FBUSxDQUFFLENBQ2xCLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEVBQ3ZCLENBQ0EsZUFBZSxDQUFRLENBQUUsQ0FDckIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsRUFDMUIsQ0FDQSxTQUFTLENBQUssQ0FBRSxDQUNaLElBQUssSUFBTSxLQUFZLElBQUksQ0FBQyxTQUFTLENBQ2pDLEVBQVMsRUFDakIsQ0FDSixDQ2RPLE1BQU0sRUFDVCxZQUFZLENBQU0sQ0FBRSxDQUNoQixJQUFJLENBQUMsTUFBTSxDQUFHLEVBQ2QsSUFBSSxDQUFDLE1BQU0sQ0FBRyxFQUNkLElBQUksQ0FBQyxJQUFJLENBQUcsSUFBSUMsU0FBUyxHQUN6QixJQUFJLENBQUMsVUFBVSxDQUFHLEVBQU8sVUFBVSxBQUN2QyxDQUNBLFdBQVksQ0FDUixJQUFNLEVBQWEsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FDbEQsS0FBSSxDQUFDLE1BQU0sRUFBSSxFQUNmLElBQU0sRUFBUSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFFLElBQUksQ0FBQyxNQUFNLENBQUcsR0FFM0QsT0FEQSxJQUFJLENBQUMsTUFBTSxFQUFJLEVBQU0sVUFBVSxDQUN4QixJQUFJQyxjQUFjLE1BQU0sQ0FBQyxFQUNwQyxDQUNB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