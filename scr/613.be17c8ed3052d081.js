"use strict";(self.webpackChunk_tolokoban_p2p_doc=self.webpackChunk_tolokoban_p2p_doc||[]).push([["613"],{936(e,t,n){n.d(t,{Nx:()=>c,V6:()=>f});var s=n(425);class i{constructor(){this.listeners=new Set}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}dispatch(e){for(let t of this.listeners)t(e)}}class r{constructor(e){this.buffer=e,this.offset=0,this.view=new DataView(e),this.byteLength=e.byteLength}getString(){let e=this.view.getUint32(this.offset);this.offset+=4;let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=t.byteLength,new TextDecoder().decode(t)}getArrayBuffer(){let e=this.view.getUint32(this.offset);this.offset+=4;let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=t.byteLength,t}getUint8(){let e=this.view.getUint8(this.offset);return this.offset+=1,e}getInt8(){let e=this.view.getInt8(this.offset);return this.offset+=1,e}getUint16(){let e=this.view.getUint16(this.offset);return this.offset+=2,e}getInt16(){let e=this.view.getInt16(this.offset);return this.offset+=2,e}getUint32(){let e=this.view.getUint32(this.offset);return this.offset+=4,e}getInt32(){let e=this.view.getInt32(this.offset);return this.offset+=4,e}getFloat32(){let e=this.view.getFloat32(this.offset);return this.offset+=4,e}getFloat64(){let e=this.view.getFloat64(this.offset);return this.offset+=8,e}}let o={Uint8:1,Uint16:2,Uint32:4,Int8:1,Int16:2,Int32:4,Float32:4,Float64:8};class a{constructor(e){this.signalServerURL=e,this.eventConnected=new i,this.eventMessage=new i,this.eventClose=new i,this.remoteChannel=null,this.messageToBeSent=[],this.handleMessage=e=>{let{data:t}=e;console.log("RECEIVED:",t);let n=new r(t);this.eventMessage.dispatch(n)},this.onMessage=e=>{if(console.log("\uD83D\uDC1E [peer@187] data =",e),e instanceof ArrayBuffer)this.eventMessage.dispatch(new r(e));else throw Error("Unexpected message type!")},this.peerConnection=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"}]}),this.dataChannel=this.peerConnection.createDataChannel("p2p"),this.peerConnection.ondatachannel=e=>{let{channel:t}=e;this.remoteChannel=t,t.onmessage=this.handleMessage,t.onclose=()=>this.eventClose.dispatch(this)}}close(){var e;null==(e=this.remoteChannel)||e.close(),this.dataChannel.close()}clear(){return this.messageToBeSent.splice(0),this}putString(e){return this.messageToBeSent.push(e),this}putArrayBuffer(e){return this.messageToBeSent.push(e),this}putNumber(e,t){return this.messageToBeSent.push({type:e,value:t}),this}send(){var e;let{messageToBeSent:t}=this;if(0===t.length)return;let n=0,s=[];for(let e of t)if("string"==typeof e){n+=4;let t=new TextEncoder().encode(e);s.push(t),n+=t.byteLength}else if(e instanceof ArrayBuffer){n+=4;let t=new Uint8Array(e);s.push(t),n+=t.byteLength}else n+=o[e.type];let i=new Uint8Array(n),r=new DataView(i.buffer),a=0;for(let e of t)if("string"==typeof e||e instanceof ArrayBuffer){let e=s.shift();if(!e)throw Error("Missing chunk!");r.setUint32(a,e.byteLength),a+=4,i.set(e,a),a+=e.byteLength}else{switch(e.type){case"Float32":r.setFloat32(a,e.value);break;case"Float64":r.setFloat64(a,e.value);break;case"Int16":r.setInt16(a,e.value);break;case"Int32":r.setInt32(a,e.value);break;case"Int8":r.setInt8(a,e.value);break;case"Uint16":case"Uint32":case"Uint8":r.setUint16(a,e.value);break;default:throw Error(`Unknown type "${e.type}"!`)}a+=o[e.type]}null==(e=this.remoteChannel)||e.send(i)}sendString(e){this.clear().putString(e).send()}signal(e){var t,n,i,r;return t=this,n=void 0,i=void 0,r=function*(){var t,n;let i={s:e.service};t=e,(0,s.Xj)(t,{input:"string"})&&(i.i=e.input),n=e,(0,s.Xj)(n,{key:"string"})&&(i.k=e.key);let r=new Headers({"Content-Type":"application/json"}),o=yield fetch(this.signalServerURL,{method:"POST",headers:r,mode:"cors",cache:"no-cache",redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(i)});return yield o.json()},new(i||(i=Promise))(function(e,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(t){var n;t.done?e(t.value):((n=t.value)instanceof i?n:new i(function(e){e(n)})).then(o,a)}l((r=r.apply(t,n||[])).next())})}}var l=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function o(e){try{l(s.next(e))}catch(e){r(e)}}function a(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};class c extends a{static connect(e,t){return l(this,void 0,void 0,function*(){let n=new c(e,t);return yield n.connect(),n})}constructor(e,t){super(e),this._id="",this._address="",this._id=t}get id(){return this._id}get address(){return this._address}connect(){return l(this,void 0,void 0,function*(){let e=yield this.readOffer(),t=yield this.createAnswer(e);yield this.signalAnswer(t)})}readOffer(){return l(this,void 0,void 0,function*(){let e=yield this.signal({service:"get-offer",key:this.id});(0,s.j)(e,{offer:"string"});let t=JSON.parse(e.offer);return(0,s.X9)(t,{type:["literal","offer"],sdp:"string"}),t})}signalAnswer(e){return l(this,void 0,void 0,function*(){let t=JSON.stringify(e),n=yield this.signal({service:"set-answer",input:t,key:this.id});(0,s.j)(n,{id:"string"})})}createAnswer(e){return l(this,void 0,void 0,function*(){return new Promise((t,n)=>{l(this,void 0,void 0,function*(){try{let{peerConnection:n,dataChannel:s}=this;n.setRemoteDescription(e),s.onopen=()=>{console.log("ANSWER: Connection established!"),this.eventConnected.dispatch(this)},s.onmessage=e=>this.onMessage(e.data);let i=yield n.createAnswer();yield n.setLocalDescription(i),n.onicecandidate=e=>{e.candidate||t(n.localDescription)}}catch(e){console.error("Unable to create an offer:",e),n(e)}})})})}}var h=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function o(e){try{l(s.next(e))}catch(e){r(e)}}function a(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((s=s.apply(e,t||[])).next())})};class f extends a{static connect(e){return h(this,void 0,void 0,function*(){let t=new f(e);return yield t.connect(),t})}constructor(e){super(e),this._id="",this._address=""}get id(){return this._id}get address(){return this._address}connect(){return h(this,void 0,void 0,function*(){let e=yield this.createOffer();yield this.signalOffer(e),this.pollAnswer()})}pollAnswer(){globalThis.setTimeout(()=>h(this,void 0,void 0,function*(){try{let e=yield this.readAnswer();e?this.peerConnection.setRemoteDescription(e):this.pollAnswer()}catch(e){console.error("Error in PeerOffer.pollAnswer():",e)}}),1e3)}readAnswer(){return h(this,void 0,void 0,function*(){try{let e=yield this.signal({service:"get-answer",key:this.id});if((0,s.X9)(e,{answer:["|","string","null"]}),!e.answer)return null;let t=JSON.parse(e.answer);return(0,s.X9)(t,{type:["literal","answer"],sdp:"string"}),t}catch(e){throw console.error("Error in PeerOffer.readAnswer():",e),e}})}signalOffer(e){return h(this,void 0,void 0,function*(){let t=JSON.stringify(e),n=yield this.signal({service:"set-offer",input:t});(0,s.j)(n,{id:"string",address:"string"}),this._id=n.id,this._address=n.address})}createOffer(){return h(this,void 0,void 0,function*(){return new Promise((e,t)=>{h(this,void 0,void 0,function*(){try{let{peerConnection:n,dataChannel:s}=this;s.onopen=()=>{console.log("OFFER: Connection established!"),this.eventConnected.dispatch(this)},s.onmessage=e=>this.onMessage(e.data);let i=yield n.createOffer();yield n.setLocalDescription(i),n.onicecandidate=s=>{s.candidate||(n.localDescription?e(n.localDescription):t(Error("Unable to create Offer!")))}}catch(e){console.error("Unable to create an offer:",e),t(e)}})})})}}},424(e,t,n){n.d(t,{A:()=>a});var s=n(848),i=n(540),r=n(710);let o=r.Sxu.classNames;function a({className:e,peer:t}){let[n,a]=i.useState([]),[l,c]=i.useState(""),h=()=>{t.clear().putString(l).send(),a([{mine:!0,text:l},...n]),c("")};i.useEffect(()=>{let e=e=>{a([{mine:!1,text:e.getString()},...n])};return t.eventMessage.addListener(e),()=>t.eventMessage.removeListener(e)},[t,n]);let f=function(e){let[t,n]=i.useState(!1);return i.useEffect(()=>{let t=()=>{n(!0)};return e.eventClose.addListener(t),()=>e.eventClose.removeListener(t)},[e]),t}(t);return(0,s.jsxs)(r.UkC,{className:o.join(e,"src-components-Chat-Chat-module_chat_Lazgxc"),orientation:"column",template:"-1",children:[f?(0,s.jsx)(r.sWC,{margin:"S",color:"error",children:"Connection has been closed!"}):(0,s.jsxs)("div",{className:"src-components-Chat-Chat-module_prompt_K_vVPn",children:[(0,s.jsx)(r.Hqg,{value:l,onChange:c,autofocus:!0,onEnterKeyPressed:h}),(0,s.jsx)(r.qxP,{size:"S",icon:r.jQL,enabled:l.trim().length>0,onClick:h})]}),(0,s.jsx)("div",{className:"src-components-Chat-Chat-module_messages_o8KNTm",children:n.map((e,t)=>(0,s.jsx)("div",{className:e.mine?"src-components-Chat-Chat-module_mine_XEjMuE":"src-components-Chat-Chat-module_theirs_QqRVmz",children:(0,s.jsx)("div",{children:e.text})},t))})]})}},592(e,t,n){n.d(t,{U:()=>r});var s=n(54),i=n(425);let r={signalServer:new s.A("http://localhost:55555",{storage:{id:"signalServer",guard:i.Kg}})}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyLzYxMy5iODcwMGEyZGJmNTAzN2Y2LmpzIiwic291cmNlcyI6WyIvaG9tZS90b2xva29iYW4vQ29kZS9naXRodWIvQHRvbG9rb2Jhbi9wMnAvZGlzdC9ldmVudC5qcyIsIi9ob21lL3RvbG9rb2Jhbi9Db2RlL2dpdGh1Yi9AdG9sb2tvYmFuL3AycC9kaXN0L21lc3NhZ2UuanMiLCIvaG9tZS90b2xva29iYW4vQ29kZS9naXRodWIvQHRvbG9rb2Jhbi9wMnAvZGlzdC9wZWVyLmpzIiwiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL0B0b2xva29iYW4vcDJwL2Rpc3QvYW5zd2VyLmpzIiwiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL0B0b2xva29iYW4vcDJwL2Rpc3Qvb2ZmZXIuanMiLCJ3ZWJwYWNrOi8vQHRvbG9rb2Jhbi9wMnAuZG9jLy4vc3JjL2NvbXBvbmVudHMvQ2hhdC9DaGF0Lm1vZHVsZS5jc3M/OWU5ZCIsIi9ob21lL3RvbG9rb2Jhbi9Db2RlL2dpdGh1Yi9AdG9sb2tvYmFuL3AycC9kb2N1bWVudGF0aW9uL3NyYy9jb21wb25lbnRzL0NoYXQvQ2hhdC50c3giLCIvaG9tZS90b2xva29iYW4vQ29kZS9naXRodWIvQHRvbG9rb2Jhbi9wMnAvZG9jdW1lbnRhdGlvbi9zcmMvc3RhdGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEdlbmVyaWNFdmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gbmV3IFNldCgpO1xuICAgIH1cbiAgICBhZGRMaXN0ZW5lcihsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5hZGQobGlzdGVuZXIpO1xuICAgIH1cbiAgICByZW1vdmVMaXN0ZW5lcihsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuICAgIH1cbiAgICBkaXNwYXRjaCh2YWx1ZSkge1xuICAgICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMubGlzdGVuZXJzKVxuICAgICAgICAgICAgbGlzdGVuZXIodmFsdWUpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50LmpzLm1hcCIsImV4cG9ydCBjbGFzcyBNZXNzYWdlIHtcbiAgICBjb25zdHJ1Y3RvcihidWZmZXIpIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBidWZmZXI7XG4gICAgICAgIHRoaXMub2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy52aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG4gICAgICAgIHRoaXMuYnl0ZUxlbmd0aCA9IGJ1ZmZlci5ieXRlTGVuZ3RoO1xuICAgIH1cbiAgICBnZXRTdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IGJ5dGVMZW5ndGggPSB0aGlzLnZpZXcuZ2V0VWludDMyKHRoaXMub2Zmc2V0KTtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gNDtcbiAgICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLmJ1ZmZlci5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5vZmZzZXQgKyBieXRlTGVuZ3RoKTtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gY2h1bmsuYnl0ZUxlbmd0aDtcbiAgICAgICAgcmV0dXJuIG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShjaHVuayk7XG4gICAgfVxuICAgIGdldEFycmF5QnVmZmVyKCkge1xuICAgICAgICBjb25zdCBieXRlTGVuZ3RoID0gdGhpcy52aWV3LmdldFVpbnQzMih0aGlzLm9mZnNldCk7XG4gICAgICAgIHRoaXMub2Zmc2V0ICs9IDQ7XG4gICAgICAgIGNvbnN0IGNodW5rID0gdGhpcy5idWZmZXIuc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMub2Zmc2V0ICsgYnl0ZUxlbmd0aCk7XG4gICAgICAgIHRoaXMub2Zmc2V0ICs9IGNodW5rLmJ5dGVMZW5ndGg7XG4gICAgICAgIHJldHVybiBjaHVuaztcbiAgICB9XG4gICAgZ2V0VWludDgoKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy52aWV3LmdldFVpbnQ4KHRoaXMub2Zmc2V0KTtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gMTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBnZXRJbnQ4KCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudmlldy5nZXRJbnQ4KHRoaXMub2Zmc2V0KTtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gMTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBnZXRVaW50MTYoKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy52aWV3LmdldFVpbnQxNih0aGlzLm9mZnNldCk7XG4gICAgICAgIHRoaXMub2Zmc2V0ICs9IDI7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0SW50MTYoKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy52aWV3LmdldEludDE2KHRoaXMub2Zmc2V0KTtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gMjtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBnZXRVaW50MzIoKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy52aWV3LmdldFVpbnQzMih0aGlzLm9mZnNldCk7XG4gICAgICAgIHRoaXMub2Zmc2V0ICs9IDQ7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0SW50MzIoKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy52aWV3LmdldEludDMyKHRoaXMub2Zmc2V0KTtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gNDtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBnZXRGbG9hdDMyKCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudmlldy5nZXRGbG9hdDMyKHRoaXMub2Zmc2V0KTtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gNDtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBnZXRGbG9hdDY0KCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudmlldy5nZXRGbG9hdDY0KHRoaXMub2Zmc2V0KTtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gODtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lc3NhZ2UuanMubWFwIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBpc1R5cGUgfSBmcm9tIFwiQHRvbG9rb2Jhbi90eXBlLWd1YXJkc1wiO1xuaW1wb3J0IHsgR2VuZXJpY0V2ZW50IH0gZnJvbSBcIi4vZXZlbnQuanNcIjtcbmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tIFwiLi9tZXNzYWdlLmpzXCI7XG5jb25zdCBTSVpFUyA9IHtcbiAgICBVaW50ODogMSxcbiAgICBVaW50MTY6IDIsXG4gICAgVWludDMyOiA0LFxuICAgIEludDg6IDEsXG4gICAgSW50MTY6IDIsXG4gICAgSW50MzI6IDQsXG4gICAgRmxvYXQzMjogNCxcbiAgICBGbG9hdDY0OiA4LFxufTtcbmV4cG9ydCBjbGFzcyBQZWVyIHtcbiAgICBjb25zdHJ1Y3RvcihzaWduYWxTZXJ2ZXJVUkwpIHtcbiAgICAgICAgdGhpcy5zaWduYWxTZXJ2ZXJVUkwgPSBzaWduYWxTZXJ2ZXJVUkw7XG4gICAgICAgIHRoaXMuZXZlbnRDb25uZWN0ZWQgPSBuZXcgR2VuZXJpY0V2ZW50KCk7XG4gICAgICAgIHRoaXMuZXZlbnRNZXNzYWdlID0gbmV3IEdlbmVyaWNFdmVudCgpO1xuICAgICAgICB0aGlzLmV2ZW50Q2xvc2UgPSBuZXcgR2VuZXJpY0V2ZW50KCk7XG4gICAgICAgIHRoaXMucmVtb3RlQ2hhbm5lbCA9IG51bGw7XG4gICAgICAgIHRoaXMubWVzc2FnZVRvQmVTZW50ID0gW107XG4gICAgICAgIHRoaXMuaGFuZGxlTWVzc2FnZSA9IChldnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gZXZ0O1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJSRUNFSVZFRDpcIiwgZGF0YSk7IC8vIEBGSVhNRTogUmVtb3ZlIHRoaXMgbGluZSB3cml0dGVuIG9uIDIwMjYtMDEtMDkgYXQgMTE6MDJcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBuZXcgTWVzc2FnZShkYXRhKTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRNZXNzYWdlLmRpc3BhdGNoKG1lc3NhZ2UpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uTWVzc2FnZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIvCfkJ4gW3BlZXJAMTg3XSBkYXRhID1cIiwgZGF0YSk7IC8vIEBGSVhNRTogUmVtb3ZlIHRoaXMgbGluZSB3cml0dGVuIG9uIDIwMjYtMDEtMDkgYXQgMTI6MDdcbiAgICAgICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50TWVzc2FnZS5kaXNwYXRjaChuZXcgTWVzc2FnZShkYXRhKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIG1lc3NhZ2UgdHlwZSFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24gPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24oe1xuICAgICAgICAgICAgaWNlU2VydmVyczogW1xuICAgICAgICAgICAgICAgIHsgdXJsczogXCJzdHVuOnN0dW4ubC5nb29nbGUuY29tOjE5MzAyXCIgfSxcbiAgICAgICAgICAgICAgICB7IHVybHM6IFwic3R1bjpzdHVuMS5sLmdvb2dsZS5jb206MTkzMDJcIiB9LFxuICAgICAgICAgICAgICAgIHsgdXJsczogXCJzdHVuOnN0dW4yLmwuZ29vZ2xlLmNvbToxOTMwMlwiIH0sXG4gICAgICAgICAgICAgICAgeyB1cmxzOiBcInN0dW46c3R1bjMubC5nb29nbGUuY29tOjE5MzAyXCIgfSxcbiAgICAgICAgICAgICAgICB7IHVybHM6IFwic3R1bjpzdHVuNC5sLmdvb2dsZS5jb206MTkzMDJcIiB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWwgPSB0aGlzLnBlZXJDb25uZWN0aW9uLmNyZWF0ZURhdGFDaGFubmVsKFwicDJwXCIpO1xuICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLm9uZGF0YWNoYW5uZWwgPSAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IGNoYW5uZWwgfSA9IGV2dDtcbiAgICAgICAgICAgIHRoaXMucmVtb3RlQ2hhbm5lbCA9IGNoYW5uZWw7XG4gICAgICAgICAgICBjaGFubmVsLm9ubWVzc2FnZSA9IHRoaXMuaGFuZGxlTWVzc2FnZTtcbiAgICAgICAgICAgIGNoYW5uZWwub25jbG9zZSA9ICgpID0+IHRoaXMuZXZlbnRDbG9zZS5kaXNwYXRjaCh0aGlzKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgKF9hID0gdGhpcy5yZW1vdGVDaGFubmVsKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbC5jbG9zZSgpO1xuICAgIH1cbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5tZXNzYWdlVG9CZVNlbnQuc3BsaWNlKDApO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcHV0U3RyaW5nKG1lc3NhZ2UpIHtcbiAgICAgICAgdGhpcy5tZXNzYWdlVG9CZVNlbnQucHVzaChtZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHB1dEFycmF5QnVmZmVyKGFycmF5QnVmZmVyKSB7XG4gICAgICAgIHRoaXMubWVzc2FnZVRvQmVTZW50LnB1c2goYXJyYXlCdWZmZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcHV0TnVtYmVyKHR5cGUsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMubWVzc2FnZVRvQmVTZW50LnB1c2goeyB0eXBlLCB2YWx1ZSB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNlbmQoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgeyBtZXNzYWdlVG9CZVNlbnQgfSA9IHRoaXM7XG4gICAgICAgIGlmIChtZXNzYWdlVG9CZVNlbnQubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgYnl0ZUxlbmd0aCA9IDA7XG4gICAgICAgIGNvbnN0IGNodW5rcyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgbWVzc2FnZVRvQmVTZW50KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBieXRlTGVuZ3RoICs9IDQ7XG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoaXRlbSk7XG4gICAgICAgICAgICAgICAgY2h1bmtzLnB1c2goY2h1bmspO1xuICAgICAgICAgICAgICAgIGJ5dGVMZW5ndGggKz0gY2h1bmsuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0gaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIGJ5dGVMZW5ndGggKz0gNDtcbiAgICAgICAgICAgICAgICBjb25zdCBjaHVuayA9IG5ldyBVaW50OEFycmF5KGl0ZW0pO1xuICAgICAgICAgICAgICAgIGNodW5rcy5wdXNoKGNodW5rKTtcbiAgICAgICAgICAgICAgICBieXRlTGVuZ3RoICs9IGNodW5rLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBieXRlTGVuZ3RoICs9IFNJWkVTW2l0ZW0udHlwZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXJyYXkgPSBuZXcgVWludDhBcnJheShieXRlTGVuZ3RoKTtcbiAgICAgICAgY29uc3QgdmlldyA9IG5ldyBEYXRhVmlldyhhcnJheS5idWZmZXIpO1xuICAgICAgICBsZXQgYnl0ZU9mZnNldCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBtZXNzYWdlVG9CZVNlbnQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIiB8fCBpdGVtIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaHVuayA9IGNodW5rcy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIGlmICghY2h1bmspXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgY2h1bmshXCIpO1xuICAgICAgICAgICAgICAgIHZpZXcuc2V0VWludDMyKGJ5dGVPZmZzZXQsIGNodW5rLmJ5dGVMZW5ndGgpO1xuICAgICAgICAgICAgICAgIGJ5dGVPZmZzZXQgKz0gNDtcbiAgICAgICAgICAgICAgICBhcnJheS5zZXQoY2h1bmssIGJ5dGVPZmZzZXQpO1xuICAgICAgICAgICAgICAgIGJ5dGVPZmZzZXQgKz0gY2h1bmsuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoaXRlbS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJGbG9hdDMyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnNldEZsb2F0MzIoYnl0ZU9mZnNldCwgaXRlbS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkZsb2F0NjRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0RmxvYXQ2NChieXRlT2Zmc2V0LCBpdGVtLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiSW50MTZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0SW50MTYoYnl0ZU9mZnNldCwgaXRlbS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkludDMyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnNldEludDMyKGJ5dGVPZmZzZXQsIGl0ZW0udmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJJbnQ4XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnNldEludDgoYnl0ZU9mZnNldCwgaXRlbS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlVpbnQxNlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zZXRVaW50MTYoYnl0ZU9mZnNldCwgaXRlbS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlVpbnQzMlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zZXRVaW50MTYoYnl0ZU9mZnNldCwgaXRlbS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlVpbnQ4XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnNldFVpbnQxNihieXRlT2Zmc2V0LCBpdGVtLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHR5cGUgXCIke2l0ZW0udHlwZX1cIiFgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnl0ZU9mZnNldCArPSBTSVpFU1tpdGVtLnR5cGVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIChfYSA9IHRoaXMucmVtb3RlQ2hhbm5lbCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNlbmQoYXJyYXkpO1xuICAgIH1cbiAgICBzZW5kU3RyaW5nKG1lc3NhZ2UpIHtcbiAgICAgICAgdGhpcy5jbGVhcigpLnB1dFN0cmluZyhtZXNzYWdlKS5zZW5kKCk7XG4gICAgfVxuICAgIHNpZ25hbChhcmdzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgICAgIHM6IGFyZ3Muc2VydmljZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoaGFzSW5wdXQoYXJncykpXG4gICAgICAgICAgICAgICAgZGF0YS5pID0gYXJncy5pbnB1dDtcbiAgICAgICAgICAgIGlmIChoYXNLZXkoYXJncykpXG4gICAgICAgICAgICAgICAgZGF0YS5rID0gYXJncy5rZXk7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoe1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCByZXNwID0geWllbGQgZmV0Y2godGhpcy5zaWduYWxTZXJ2ZXJVUkwsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgbW9kZTogXCJjb3JzXCIsXG4gICAgICAgICAgICAgICAgY2FjaGU6IFwibm8tY2FjaGVcIixcbiAgICAgICAgICAgICAgICByZWRpcmVjdDogXCJmb2xsb3dcIixcbiAgICAgICAgICAgICAgICByZWZlcnJlclBvbGljeTogXCJuby1yZWZlcnJlclwiLFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcC5qc29uKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGhhc0lucHV0KGFyZ3MpIHtcbiAgICByZXR1cm4gaXNUeXBlKGFyZ3MsIHsgaW5wdXQ6IFwic3RyaW5nXCIgfSk7XG59XG5mdW5jdGlvbiBoYXNLZXkoYXJncykge1xuICAgIHJldHVybiBpc1R5cGUoYXJncywgeyBrZXk6IFwic3RyaW5nXCIgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wZWVyLmpzLm1hcCIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgYXNzZXJ0VHlwZSwgYXNzZXJ0VHlwZSQgfSBmcm9tIFwiQHRvbG9rb2Jhbi90eXBlLWd1YXJkc1wiO1xuaW1wb3J0IHsgUGVlciB9IGZyb20gXCIuL3BlZXIuanNcIjtcbmV4cG9ydCBjbGFzcyBQZWVyQW5zd2VyIGV4dGVuZHMgUGVlciB7XG4gICAgc3RhdGljIGNvbm5lY3Qoc2lnbmFsU2VydmVyVVJMLCBpZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcGVlck9mZmVyID0gbmV3IFBlZXJBbnN3ZXIoc2lnbmFsU2VydmVyVVJMLCBpZCk7XG4gICAgICAgICAgICB5aWVsZCBwZWVyT2ZmZXIuY29ubmVjdCgpO1xuICAgICAgICAgICAgcmV0dXJuIHBlZXJPZmZlcjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHNpZ25hbFNlcnZlclVSTCwgaWQpIHtcbiAgICAgICAgc3VwZXIoc2lnbmFsU2VydmVyVVJMKTtcbiAgICAgICAgdGhpcy5faWQgPSBcIlwiO1xuICAgICAgICB0aGlzLl9hZGRyZXNzID0gXCJcIjtcbiAgICAgICAgdGhpcy5faWQgPSBpZDtcbiAgICB9XG4gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faWQ7XG4gICAgfVxuICAgIGdldCBhZGRyZXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkcmVzcztcbiAgICB9XG4gICAgY29ubmVjdCgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IG9mZmVyID0geWllbGQgdGhpcy5yZWFkT2ZmZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IGFuc3dlciA9IHlpZWxkIHRoaXMuY3JlYXRlQW5zd2VyKG9mZmVyKTtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMuc2lnbmFsQW5zd2VyKGFuc3dlcik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZWFkT2ZmZXIoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0geWllbGQgdGhpcy5zaWduYWwoe1xuICAgICAgICAgICAgICAgIHNlcnZpY2U6IFwiZ2V0LW9mZmVyXCIsXG4gICAgICAgICAgICAgICAga2V5OiB0aGlzLmlkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhc3NlcnRUeXBlKGRhdGEsIHsgb2ZmZXI6IFwic3RyaW5nXCIgfSk7XG4gICAgICAgICAgICBjb25zdCBvZmZlciA9IEpTT04ucGFyc2UoZGF0YS5vZmZlcik7XG4gICAgICAgICAgICBhc3NlcnRUeXBlJChvZmZlciwge1xuICAgICAgICAgICAgICAgIHR5cGU6IFtcImxpdGVyYWxcIiwgXCJvZmZlclwiXSxcbiAgICAgICAgICAgICAgICBzZHA6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBvZmZlcjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNpZ25hbEFuc3dlcihhbnN3ZXIpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGFuc3dlckFzU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoYW5zd2VyKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zaWduYWwoe1xuICAgICAgICAgICAgICAgIHNlcnZpY2U6IFwic2V0LWFuc3dlclwiLFxuICAgICAgICAgICAgICAgIGlucHV0OiBhbnN3ZXJBc1N0cmluZyxcbiAgICAgICAgICAgICAgICBrZXk6IHRoaXMuaWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFzc2VydFR5cGUocmVzcG9uc2UsIHsgaWQ6IFwic3RyaW5nXCIgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjcmVhdGVBbnN3ZXIob2ZmZXIpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aW9uID0gKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBwZWVyQ29ubmVjdGlvbiwgZGF0YUNoYW5uZWwgfSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihvZmZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbC5vbm9wZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBTlNXRVI6IENvbm5lY3Rpb24gZXN0YWJsaXNoZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRDb25uZWN0ZWQuZGlzcGF0Y2godGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwub25tZXNzYWdlID0gKGUpID0+IHRoaXMub25NZXNzYWdlKGUuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbnN3ZXIgPSB5aWVsZCBwZWVyQ29ubmVjdGlvbi5jcmVhdGVBbnN3ZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24oYW5zd2VyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLm9uaWNlY2FuZGlkYXRlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFldmVudC5jYW5kaWRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShwZWVyQ29ubmVjdGlvbi5sb2NhbERlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlVuYWJsZSB0byBjcmVhdGUgYW4gb2ZmZXI6XCIsIGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhY3Rpb24oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbnN3ZXIuanMubWFwIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBhc3NlcnRUeXBlLCBhc3NlcnRUeXBlJCB9IGZyb20gXCJAdG9sb2tvYmFuL3R5cGUtZ3VhcmRzXCI7XG5pbXBvcnQgeyBQZWVyIH0gZnJvbSBcIi4vcGVlci5qc1wiO1xuZXhwb3J0IGNsYXNzIFBlZXJPZmZlciBleHRlbmRzIFBlZXIge1xuICAgIHN0YXRpYyBjb25uZWN0KHNpZ25hbFNlcnZlclVSTCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcGVlck9mZmVyID0gbmV3IFBlZXJPZmZlcihzaWduYWxTZXJ2ZXJVUkwpO1xuICAgICAgICAgICAgeWllbGQgcGVlck9mZmVyLmNvbm5lY3QoKTtcbiAgICAgICAgICAgIHJldHVybiBwZWVyT2ZmZXI7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihzaWduYWxTZXJ2ZXJVUkwpIHtcbiAgICAgICAgc3VwZXIoc2lnbmFsU2VydmVyVVJMKTtcbiAgICAgICAgdGhpcy5faWQgPSBcIlwiO1xuICAgICAgICB0aGlzLl9hZGRyZXNzID0gXCJcIjtcbiAgICB9XG4gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faWQ7XG4gICAgfVxuICAgIGdldCBhZGRyZXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkcmVzcztcbiAgICB9XG4gICAgY29ubmVjdCgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IG9mZmVyID0geWllbGQgdGhpcy5jcmVhdGVPZmZlcigpO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5zaWduYWxPZmZlcihvZmZlcik7XG4gICAgICAgICAgICB0aGlzLnBvbGxBbnN3ZXIoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBvbGxBbnN3ZXIoKSB7XG4gICAgICAgIGdsb2JhbFRoaXMuc2V0VGltZW91dCgoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFuc3dlciA9IHlpZWxkIHRoaXMucmVhZEFuc3dlcigpO1xuICAgICAgICAgICAgICAgIGlmIChhbnN3ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihhbnN3ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2xsQW5zd2VyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIFBlZXJPZmZlci5wb2xsQW5zd2VyKCk6XCIsIGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIDEwMDApO1xuICAgIH1cbiAgICByZWFkQW5zd2VyKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0geWllbGQgdGhpcy5zaWduYWwoe1xuICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlOiBcImdldC1hbnN3ZXJcIixcbiAgICAgICAgICAgICAgICAgICAga2V5OiB0aGlzLmlkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFzc2VydFR5cGUkKGRhdGEsIHtcbiAgICAgICAgICAgICAgICAgICAgYW5zd2VyOiBbXCJ8XCIsIFwic3RyaW5nXCIsIFwibnVsbFwiXSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEuYW5zd2VyKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICBjb25zdCBhbnN3ZXIgPSBKU09OLnBhcnNlKGRhdGEuYW5zd2VyKTtcbiAgICAgICAgICAgICAgICBhc3NlcnRUeXBlJChhbnN3ZXIsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogW1wibGl0ZXJhbFwiLCBcImFuc3dlclwiXSxcbiAgICAgICAgICAgICAgICAgICAgc2RwOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBhbnN3ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gUGVlck9mZmVyLnJlYWRBbnN3ZXIoKTpcIiwgZXgpO1xuICAgICAgICAgICAgICAgIHRocm93IGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2lnbmFsT2ZmZXIob2ZmZXIpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IG9mZmVyQXNTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShvZmZlcik7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2lnbmFsKHtcbiAgICAgICAgICAgICAgICBzZXJ2aWNlOiBcInNldC1vZmZlclwiLFxuICAgICAgICAgICAgICAgIGlucHV0OiBvZmZlckFzU3RyaW5nLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhc3NlcnRUeXBlKHJlc3BvbnNlLCB7IGlkOiBcInN0cmluZ1wiLCBhZGRyZXNzOiBcInN0cmluZ1wiIH0pO1xuICAgICAgICAgICAgdGhpcy5faWQgPSByZXNwb25zZS5pZDtcbiAgICAgICAgICAgIHRoaXMuX2FkZHJlc3MgPSByZXNwb25zZS5hZGRyZXNzO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY3JlYXRlT2ZmZXIoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGlvbiA9ICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgcGVlckNvbm5lY3Rpb24sIGRhdGFDaGFubmVsIH0gPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwub25vcGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiT0ZGRVI6IENvbm5lY3Rpb24gZXN0YWJsaXNoZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRDb25uZWN0ZWQuZGlzcGF0Y2godGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwub25tZXNzYWdlID0gKGUpID0+IHRoaXMub25NZXNzYWdlKGUuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvZmZlciA9IHlpZWxkIHBlZXJDb25uZWN0aW9uLmNyZWF0ZU9mZmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCBwZWVyQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKG9mZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLm9uaWNlY2FuZGlkYXRlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFldmVudC5jYW5kaWRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZXJDb25uZWN0aW9uLmxvY2FsRGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocGVlckNvbm5lY3Rpb24ubG9jYWxEZXNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiVW5hYmxlIHRvIGNyZWF0ZSBPZmZlciFcIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmFibGUgdG8gY3JlYXRlIGFuIG9mZmVyOlwiLCBleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYWN0aW9uKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2ZmZXIuanMubWFwIiwiLy8gZXh0cmFjdGVkIGJ5IGNzcy1leHRyYWN0LXJzcGFjay1wbHVnaW5cbmV4cG9ydCBkZWZhdWx0IHtcImNoYXRcIjpcInNyYy1jb21wb25lbnRzLUNoYXQtQ2hhdC1tb2R1bGVfY2hhdF9MYXpneGNcIixcIm1lc3NhZ2VzXCI6XCJzcmMtY29tcG9uZW50cy1DaGF0LUNoYXQtbW9kdWxlX21lc3NhZ2VzX284S05UbVwiLFwibWluZVwiOlwic3JjLWNvbXBvbmVudHMtQ2hhdC1DaGF0LW1vZHVsZV9taW5lX1hFak11RVwiLFwidGhlaXJzXCI6XCJzcmMtY29tcG9uZW50cy1DaGF0LUNoYXQtbW9kdWxlX3RoZWlyc19RcVJWbXpcIixcInByb21wdFwiOlwic3JjLWNvbXBvbmVudHMtQ2hhdC1DaGF0LW1vZHVsZV9wcm9tcHRfS192VlBuXCJ9OyIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7XG4gIEljb25NYWlsLFxuICBUaGVtZSxcbiAgVmlld0Zsb2F0aW5nQnV0dG9uLFxuICBWaWV3SW5wdXRUZXh0LFxuICBWaWV3UGFuZWwsXG4gIFZpZXdTdHJpcCxcbn0gZnJvbSBcIkB0b2xva29iYW4vdWlcIjtcbmltcG9ydCB7IFBlZXIsIFBlZXJNZXNzYWdlIH0gZnJvbSBcIkB0b2xva29iYW4vcDJwXCI7XG5cbmltcG9ydCBTdHlsZXMgZnJvbSBcIi4vQ2hhdC5tb2R1bGUuY3NzXCI7XG5cbmNvbnN0ICQgPSBUaGVtZS5jbGFzc05hbWVzO1xuXG5leHBvcnQgaW50ZXJmYWNlIENoYXRQcm9wcyB7XG4gIGNsYXNzTmFtZT86IHN0cmluZztcbiAgcGVlcjogUGVlcjtcbn1cblxuaW50ZXJmYWNlIE1lc3NhZ2Uge1xuICBtaW5lOiBib29sZWFuO1xuICB0ZXh0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENoYXQoeyBjbGFzc05hbWUsIHBlZXIgfTogQ2hhdFByb3BzKSB7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gUmVhY3QudXNlU3RhdGU8TWVzc2FnZVtdPihbXSk7XG4gIGNvbnN0IFt0ZXh0LCBzZXRUZXh0XSA9IFJlYWN0LnVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBoYW5kbGVTZW5kID0gKCkgPT4ge1xuICAgIHBlZXIuY2xlYXIoKS5wdXRTdHJpbmcodGV4dCkuc2VuZCgpO1xuICAgIHNldE1lc3NhZ2VzKFt7IG1pbmU6IHRydWUsIHRleHQgfSwgLi4ubWVzc2FnZXNdKTtcbiAgICBzZXRUZXh0KFwiXCIpO1xuICB9O1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGNhbGxiYWNrID0gKG1lc3NhZ2U6IFBlZXJNZXNzYWdlKSA9PiB7XG4gICAgICBjb25zdCB0ZXh0ID0gbWVzc2FnZS5nZXRTdHJpbmcoKTtcbiAgICAgIHNldE1lc3NhZ2VzKFt7IG1pbmU6IGZhbHNlLCB0ZXh0IH0sIC4uLm1lc3NhZ2VzXSk7XG4gICAgfTtcbiAgICBwZWVyLmV2ZW50TWVzc2FnZS5hZGRMaXN0ZW5lcihjYWxsYmFjayk7XG4gICAgcmV0dXJuICgpID0+IHBlZXIuZXZlbnRNZXNzYWdlLnJlbW92ZUxpc3RlbmVyKGNhbGxiYWNrKTtcbiAgfSwgW3BlZXIsIG1lc3NhZ2VzXSk7XG4gIGNvbnN0IGNsb3NlZCA9IHVzZUNsb3NlZChwZWVyKTtcblxuICByZXR1cm4gKFxuICAgIDxWaWV3U3RyaXBcbiAgICAgIGNsYXNzTmFtZT17JC5qb2luKGNsYXNzTmFtZSwgU3R5bGVzLmNoYXQpfVxuICAgICAgb3JpZW50YXRpb249XCJjb2x1bW5cIlxuICAgICAgdGVtcGxhdGU9XCItMVwiXG4gICAgPlxuICAgICAge2Nsb3NlZCA/IChcbiAgICAgICAgPFZpZXdQYW5lbCBtYXJnaW49XCJTXCIgY29sb3I9XCJlcnJvclwiPlxuICAgICAgICAgIENvbm5lY3Rpb24gaGFzIGJlZW4gY2xvc2VkIVxuICAgICAgICA8L1ZpZXdQYW5lbD5cbiAgICAgICkgOiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtTdHlsZXMucHJvbXB0fT5cbiAgICAgICAgICA8Vmlld0lucHV0VGV4dFxuICAgICAgICAgICAgdmFsdWU9e3RleHR9XG4gICAgICAgICAgICBvbkNoYW5nZT17c2V0VGV4dH1cbiAgICAgICAgICAgIGF1dG9mb2N1c1xuICAgICAgICAgICAgb25FbnRlcktleVByZXNzZWQ9e2hhbmRsZVNlbmR9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8Vmlld0Zsb2F0aW5nQnV0dG9uXG4gICAgICAgICAgICBzaXplPVwiU1wiXG4gICAgICAgICAgICBpY29uPXtJY29uTWFpbH1cbiAgICAgICAgICAgIGVuYWJsZWQ9e3RleHQudHJpbSgpLmxlbmd0aCA+IDB9XG4gICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVTZW5kfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtTdHlsZXMubWVzc2FnZXN9PlxuICAgICAgICB7bWVzc2FnZXMubWFwKChpdGVtLCBpbmRleCkgPT4gKFxuICAgICAgICAgIDxkaXYga2V5PXtpbmRleH0gY2xhc3NOYW1lPXtpdGVtLm1pbmUgPyBTdHlsZXMubWluZSA6IFN0eWxlcy50aGVpcnN9PlxuICAgICAgICAgICAgPGRpdj57aXRlbS50ZXh0fTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvVmlld1N0cmlwPlxuICApO1xufVxuXG5mdW5jdGlvbiB1c2VDbG9zZWQocGVlcjogUGVlcikge1xuICBjb25zdCBbY2xvc2VkLCBzZXRDbG9zZWRdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGNhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgc2V0Q2xvc2VkKHRydWUpO1xuICAgIH07XG4gICAgcGVlci5ldmVudENsb3NlLmFkZExpc3RlbmVyKGNhbGxiYWNrKTtcbiAgICByZXR1cm4gKCkgPT4gcGVlci5ldmVudENsb3NlLnJlbW92ZUxpc3RlbmVyKGNhbGxiYWNrKTtcbiAgfSwgW3BlZXJdKTtcblxuICByZXR1cm4gY2xvc2VkO1xufVxuIiwiaW1wb3J0IEF0b21pY1N0YXRlIGZyb20gXCJAdG9sb2tvYmFuL3JlYWN0LXN0YXRlXCI7XG5pbXBvcnQgeyBpc1N0cmluZyB9IGZyb20gXCJAdG9sb2tvYmFuL3R5cGUtZ3VhcmRzXCI7XG5cbmV4cG9ydCBjb25zdCBTdGF0ZSA9IHtcbiAgc2lnbmFsU2VydmVyOiBuZXcgQXRvbWljU3RhdGUoXCJodHRwOi8vbG9jYWxob3N0OjU1NTU1XCIsIHtcbiAgICBzdG9yYWdlOiB7XG4gICAgICBpZDogXCJzaWduYWxTZXJ2ZXJcIixcbiAgICAgIGd1YXJkOiBpc1N0cmluZyxcbiAgICB9LFxuICB9KSxcbn07XG4iXSwibmFtZXMiOlsiU2V0IiwiRGF0YVZpZXciLCJUZXh0RGVjb2RlciIsImUiLCJjb25zb2xlIiwiQXJyYXlCdWZmZXIiLCJFcnJvciIsIlJUQ1BlZXJDb25uZWN0aW9uIiwiVGV4dEVuY29kZXIiLCJVaW50OEFycmF5IiwidCIsIkhlYWRlcnMiLCJmZXRjaCIsIkpTT04iLCJQcm9taXNlIiwiciIsImdsb2JhbFRoaXMiLCJoIiwiaSJdLCJtYXBwaW5ncyI6IjRKQUFPLE9BQU0sRUFDVCxhQUFjLENBQ1YsSUFBSSxDQUFDLFNBQVMsQ0FBRyxJQUFJQSxHQUN6QixDQUNBLFlBQVksQ0FBUSxDQUFFLENBQ2xCLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEVBQ3ZCLENBQ0EsZUFBZSxDQUFRLENBQUUsQ0FDckIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsRUFDMUIsQ0FDQSxTQUFTLENBQUssQ0FBRSxDQUNaLElBQUssSUFBTSxLQUFZLElBQUksQ0FBQyxTQUFTLENBQ2pDLEVBQVMsRUFDakIsQ0FDSixDQ2RPLE1BQU0sRUFDVCxZQUFZLENBQU0sQ0FBRSxDQUNoQixJQUFJLENBQUMsTUFBTSxDQUFHLEVBQ2QsSUFBSSxDQUFDLE1BQU0sQ0FBRyxFQUNkLElBQUksQ0FBQyxJQUFJLENBQUcsSUFBSUMsU0FBUyxHQUN6QixJQUFJLENBQUMsVUFBVSxDQUFHLEVBQU8sVUFBVSxBQUN2QyxDQUNBLFdBQVksQ0FDUixJQUFNLEVBQWEsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FDbEQsS0FBSSxDQUFDLE1BQU0sRUFBSSxFQUNmLElBQU0sRUFBUSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFFLElBQUksQ0FBQyxNQUFNLENBQUcsR0FFM0QsT0FEQSxJQUFJLENBQUMsTUFBTSxFQUFJLEVBQU0sVUFBVSxDQUN4QixJQUFJQyxjQUFjLE1BQU0sQ0FBQyxFQUNwQyxDQUNBLGdCQUFpQixDQUNiLElBQU0sRUFBYSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUNsRCxLQUFJLENBQUMsTUFBTSxFQUFJLEVBQ2YsSUFBTSxFQUFRLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBRyxHQUUzRCxPQURBLElBQUksQ0FBQyxNQUFNLEVBQUksRUFBTSxVQUFVLENBQ3hCLENBQ1gsQ0FDQSxVQUFXLENBQ1AsSUFBTSxFQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBRTVDLE9BREEsSUFBSSxDQUFDLE1BQU0sRUFBSSxFQUNSLENBQ1gsQ0FDQSxTQUFVLENBQ04sSUFBTSxFQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBRTNDLE9BREEsSUFBSSxDQUFDLE1BQU0sRUFBSSxFQUNSLENBQ1gsQ0FDQSxXQUFZLENBQ1IsSUFBTSxFQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBRTdDLE9BREEsSUFBSSxDQUFDLE1BQU0sRUFBSSxFQUNSLENBQ1gsQ0FDQSxVQUFXLENBQ1AsSUFBTSxFQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBRTVDLE9BREEsSUFBSSxDQUFDLE1BQU0sRUFBSSxFQUNSLENBQ1gsQ0FDQSxXQUFZLENBQ1IsSUFBTSxFQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBRTdDLE9BREEsSUFBSSxDQUFDLE1BQU0sRUFBSSxFQUNSLENBQ1gsQ0FDQSxVQUFXLENBQ1AsSUFBTSxFQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBRTVDLE9BREEsSUFBSSxDQUFDLE1BQU0sRUFBSSxFQUNSLENBQ1gsQ0FDQSxZQUFhLENBQ1QsSUFBTSxFQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBRTlDLE9BREEsSUFBSSxDQUFDLE1BQU0sRUFBSSxFQUNSLENBQ1gsQ0FDQSxZQUFhLENBQ1QsSUFBTSxFQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBRTlDLE9BREEsSUFBSSxDQUFDLE1BQU0sRUFBSSxFQUNSLENBQ1gsQ0FDSixDQ2pEQSxJQUFNLEVBQVEsQ0FDVixNQUFPLEVBQ1AsT0FBUSxFQUNSLE9BQVEsRUFDUixLQUFNLEVBQ04sTUFBTyxFQUNQLE1BQU8sRUFDUCxR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